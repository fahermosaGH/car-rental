<section class="page-flota">

  <header class="page-header">
    <h2>Flota de vehículos</h2>
    <p class="page-subtitle">Consultá todo el catálogo disponible del sistema.</p>
  </header>

  <div *ngIf="loading" class="state state-info">
    <span class="spinner"></span> Cargando flota...
  </div>

  <div *ngIf="error" class="state state-error">{{ error }}</div>

  <div class="layout" *ngIf="!loading && !error">

    <!-- SIDEBAR -->
    <aside class="sidebar">

      <div class="search-wrapper">
        <input
          class="search-box"
          type="text"
          placeholder="Buscar vehículo..."
          [(ngModel)]="searchText"
          (keyup.enter)="onSearchEnter()"
        />
      </div>

      <h3 class="sidebar-title">Filtrar por categoría</h3>

      <ul class="cat-list">
        <li *ngFor="let cat of categories">
          <button
            class="cat-chip"
            [class.active]="selectedCategory === cat"
            (click)="selectCategory(cat)">
            {{ cat }}
          </button>
        </li>
      </ul>

      <div class="sidebar-order">
        <h4>Ordenar</h4>

        <button
          class="btn-sort"
          [class.active]="sort === 'az'"
          (click)="changeSort('az')">
          A → Z
        </button>

        <button
          class="btn-sort"
          [class.active]="sort === 'za'"
          (click)="changeSort('za')">
          Z → A
        </button>
      </div>

    </aside>

    <!-- CONTENT GRID -->
    <main class="content">

      <div class="grid">

        <article class="card" *ngFor="let v of filtered">

          <div class="card-media">
            <img [src]="v.img" alt="Vehículo" />
          </div>

          <div class="card-body">
            <h3>{{ v.brand }} {{ v.model }}</h3>
            <span class="chip-categoria">{{ v.category }}</span>
          </div>

        </article>

      </div>

      <p *ngIf="filtered.length === 0" class="state state-info">
        No hay vehículos que coincidan con tu búsqueda.
      </p>

    </main>

  </div>

</section>
